<!DOCTYPE html>
<html>
<head>
    <title>Contact Us - SB Quest</title>
    <style>
        body { font-family: Arial, sans-serif; background: #f4f4f4; margin: 0; padding: 0; }
        header, footer { background: #2d2d2d; color: white; padding: 20px; text-align: center; }
        main { padding: 30px; max-width: 700px; margin: auto; background: white; border-radius: 8px; }
        input, textarea { width: 100%; padding: 10px; margin-top: 10px; border-radius: 5px; border: 1px solid #ccc; }
        button { padding: 10px 20px; margin-top: 15px; background: #007bff; color: white; border: none; cursor: pointer; border-radius: 5px; }
        h1, h2 { color: #333; }
        .message-box { border: 1px solid #ccc; padding: 10px; margin-top: 15px; border-radius: 5px; background: #f9f9f9; }
        .reply { margin-top: 10px; background: #e7f4ff; padding: 10px; border-radius: 5px; }
        .success { color: green; }
        .error { color: red; }
    </style>
</head>
<body>

<header>
    <h1>Contact SB Quest</h1>
</header>

<main>
    <h2>Get in Touch</h2>

    {% if messages %}
        {% for message in messages %}
            <p class="{% if message.tags %}{{ message.tags }}{% endif %}">{{ message }}</p>
        {% endfor %}
    {% endif %}

    <form method="post">
        {% csrf_token %}
        <input type="text" name="name" placeholder="Your Name" required>
        <input type="email" name="email" placeholder="Your Email" required>
        <input type="text" name="subject" placeholder="Subject" required>
        <textarea name="message" rows="5" placeholder="Your Message" required></textarea>
        <button type="submit">Send Message</button>
    </form>

    <h2>Your Previous Messages</h2>
    {% if contact_messages %}
        {% for msg in contact_messages %}
            <div class="message-box">
                <strong>Subject:</strong> {{ msg.subject }} <br>
                <strong>Message:</strong> {{ msg.message }} <br>
                <strong>Sent:</strong> {{ msg.created_at|date:"d M Y H:i" }} <br>
                {% if msg.reply %}
                    <div class="reply">
                        <strong>Admin Reply:</strong> {{ msg.reply }} <br>
                        <strong>Replied At:</strong> {{ msg.replied_at|date:"d M Y H:i" }}
                    </div>
                {% else %}
                    <em>No reply yet.</em>
                {% endif %}
            </div>
        {% endfor %}
    {% else %}
        <p>You havenâ€™t sent any messages yet.</p>
    {% endif %}
</main>

<footer>
    &copy; 2025 SB Quest
</footer>

</body>
</html>
